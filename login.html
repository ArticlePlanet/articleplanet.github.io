<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Using GitHub</title>
    <link rel="icon" href="https://bit.ly/samplefavicon"/>
    <style> body {  justify-content: center; align-items: center;  background-color: #f5f5f5; font-family: Arial, sans-serif; overflow: hidden; } .user-profile { text-align: center; } .user-profile img { width: 150px; height: 150px; border-radius: 50%; } .user-profile h2 { margin-top: 10px; } .user-profile p { margin-bottom: 5px; } .github { display: flex; align-items: center; padding: 12px 24px; font-size: 18px; border: none; border-radius: 30px; background-color: #24292e; color: #ffffff; cursor: pointer; box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.3); transition: background-color 0.3s, transform 0.3s; } .github:hover { background-color: #0366d6; transform: scale(1.05); } .github svg { margin-right: 10px; width: 20px; height: 20px; fill: #ffffff; } .animated-background { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; overflow: hidden; } .animated-background::before { content: ""; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: linear-gradient( 45deg, #f8e71c, #f632ab, #405de6, #009688, #f44336, #f8e71c ); background-size: 300% 300%; animation: animateBackground 20s ease-in-out infinite; } @keyframes animateBackground { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } } a { text-decoration:none; }.login-container { text-align: center; } .login-container .github { display: block; margin: 0 auto; margin-top: 20px; } </style>
        <!-- Bootstrap core CSS -->
        <link href="assets/css/bootstrap.min.css" rel="stylesheet" />
        <!-- Fonts -->
        <link
          href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
          rel="stylesheet"
        />
        <link
          href="https://fonts.googleapis.com/css?family=Righteous"
          rel="stylesheet"
        />
        <!-- Custom styles for this template -->
        <link href="assets/css/mediumish.css" rel="stylesheet" />

</head>
<body>
    <!-- Begin Nav
================================================== -->
<nav
class="navbar navbar-toggleable-md navbar-light bg-white fixed-top mediumnavigation">
<button
  class="navbar-toggler navbar-toggler-right"
  type="button"
  data-toggle="collapse"
  data-target="#navbarsExampleDefault"
  aria-controls="navbarsExampleDefault"
  aria-expanded="false"
  aria-label="Toggle navigation"
>
  <span class="navbar-toggler-icon"></span>
</button>
<div class="container">
  <!-- Begin Logo -->
  <a class="navbar-brand" href="index.html">
    <img src="assets/img/logo.png" alt="logo" />
  </a>
  <!-- End Logo -->
  <div class="collapse navbar-collapse" id="navbarsExampleDefault">
    <!-- Begin Menu -->
    <ul class="navbar-nav ml-auto">
      <li class="nav-item active">
        <a class="nav-link" href="index.html"
          >Home <span class="sr-only">(current)</span></a
        >
      </li>
      <li class="nav-item">
        <a class="nav-link" href="new/">Write</a>
      </li>
      <li class="nav-item">
        <a id="account" class="nav-link" href="login.html">Login</a>
      </li>
    </ul>
    <!-- End Menu -->
    <!-- Begin Search -->
    <form class="form-inline my-2 my-lg-0">
      <input
        class="form-control mr-sm-2"
        type="text"
        placeholder="Search"
      />
      <span class="search-icon"
        ><svg
          class="svgIcon-use"
          width="25"
          height="25"
          viewbox="0 0 25 25"
        >
          <path
            d="M20.067 18.933l-4.157-4.157a6 6 0 1 0-.884.884l4.157 4.157a.624.624 0 1 0 .884-.884zM6.5 11c0-2.62 2.13-4.75 4.75-4.75S16 8.38 16 11s-2.13 4.75-4.75 4.75S6.5 13.62 6.5 11z"
          ></path></svg></span>
    </form>
    <!-- End Search -->
  </div>
</div>
</nav>
<!-- End Nav
================================================== -->

    <div class="user-profile" id="userProfile" hidden>
        <img id="profilePicture" src="" alt="Profile Picture">
        <h2 id="userName"></h2>
        <p><strong>User ID:</strong> <span id="userId"></span></p>
        <p><strong>Login:</strong> <span id="userLogin"></span></p>
        <p style="
        /* text-align: center; */
        display: flex;
        /* text-align: center; */
        justify-content: center;
    "><button class="github" id="logoutButton">Logout</button></p>
    </div>
  
    <br>
    <div class="login-container">
        <button class="github" id="login-button">
            <svg xmlns="http://www.w3.org/2000/svg" class="ionicon" viewBox="0 0 512 512">
                <path d="M256 32C132.3 32 32 134.9 32 261.7c0 101.5 64.2 187.5 153.2 217.9a17.56 17.56 0 003.8.4c8.3 0 11.5-6.1 11.5-11.4 0-5.5-.2-19.9-.3-39.1a102.4 102.4 0 01-22.6 2.7c-43.1 0-52.9-33.5-52.9-33.5-10.2-26.5-24.9-33.6-24.9-33.6-19.5-13.7-.1-14.1 1.4-14.1h.1c22.5 2 34.3 23.8 34.3 23.8 11.2 19.6 26.2 25.1 39.6 25.1a63 63 0 0025.6-6c2-14.8 7.8-24.9 14.2-30.7-49.7-5.8-102-25.5-102-113.5 0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8a18.64 18.64 0 015-.5c8.1 0 26.4 3.1 56.6 24.1a208.21 208.21 0 01112.2 0c30.2-21 48.5-24.1 56.6-24.1a18.64 18.64 0 015 .5c12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6 0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5 0 30.7-.3 55.5-.3 63 0 5.4 3.1 11.5 11.4 11.5a19.35 19.35 0 004-.4C415.9 449.2 480 363.1 480 261.7 480 134.9 379.7 32 256 32z"/>
            </svg>
            Login with GitHub
        </button>
    </div>

    <script src="login.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", async function () {
            const accessToken = localStorage.getItem('accessToken');

            if (accessToken) {
                // Access token is present in localStorage
                // You can use the access token to fetch user details or perform other actions
                console.log('GitHub Access Token:', accessToken);

                try {
                    // Fetch user details using the access token
                    const userResponse = await fetch('https://api.github.com/user', {
                        headers: {
                            Authorization: `Bearer ${accessToken}`,
                        },
                    });

                    const user = await userResponse.json();

                    // Update HTML elements with user details
                    document.getElementById('profilePicture').src = user.avatar_url;
                    document.getElementById('userName').innerText = user.name || user.login;
                    document.getElementById('userId').innerText = user.id;
                    document.getElementById('userLogin').innerText = user.login;
                    localStorage.username = user.login;

                    // Display the user profile div
                    document.getElementById('userProfile').removeAttribute('hidden');
                } catch (error) {
                    console.error('Error fetching user details:', error);
                }
            } else {
                // Access token is not present in localStorage
                // Add your existing logic for initiating GitHub OAuth login
                // ...

                // Example:
                // document.getElementById('login-button').addEventListener('click', loginWithGitHub);
            }
        });

        document.getElementById('logoutButton').addEventListener('click', function () {
            // Logout logic
            localStorage.removeItem('accessToken');
            document.getElementById('userProfile').setAttribute('hidden', 'true');
        });
    </script>
</body>
</html>
